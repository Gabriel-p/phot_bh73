

# Scripts

## als_compare

Compares the magnitudes of two `als` files.

## apass_compare

Reads a given photometry file (.als, .mag, .obs, .dat) and compares it with
the photometry obtained from APASS. Creates the `apass_compare.png` image.

## daom_obs_prep

Checks the star density in each .mag file output by DAOMASTER, and generates
the `daom.obs` file by adding the airmass columns to the `daom.raw` file
selected. Creates the `daomaster_wt_X.png` images.

## final_phot

Takes the `daom.obs` and `fit_coeffs.dat` files and generates the calibrated
photometry using the values obtained with Python. It creates the
`BH73_phot.dat` final photometry and the `final_phot.png` image.

## phot_compare

Compares the final photometry obtained with IRAF using the `invertfit` task,
with the Python photometry generated by the above script. It creates the
`phot_compare.png` file.

## psf_compare

Compares the (aperture corrected) magnitudes in a `als` file (IRAF) with the
magnitudes obtained with the Python scripts.



# Photometry steps

1. The standard transformation coefficients were obtained using the
   Python scripts: `fitstats`, `align_crop`, `id_standards`,
   `aperphot_standards`, `fit_standard`.
   I also used the usual IRAF tasks in the folder `1_TRANSF_COEFFS`. Both
   methods seem to match pretty well (see description of `final_phot.py`
   script)
   The aperture used was 15 px and the extinction coefficients were obtained
   with the auxiliary `ext_coeff` script: U .442, B .232, V .136, I .048
3. The PSF photometry was performed with IRAF, through the `psfphot.cl` task.
   Files are stored in the `2_PSF` folder.
   The output `als.1` files (corrected by aperture with the previous task)
   were transformed to the required DAOMASTER format (`.txt`) with the IRAF
   task `txdump`.
5. These files were processed with `daomaster_auto` using a match radius from
   30 px to 2 px, and a transformation of degree 4 (with only 2 degrees the I
   filters could not be matched) The required initial x,y translations are
   stored in the `list` (and `daom.mch`) file.
   The final output file by DAOMASTER is `daom.raw`, which is converted to
   `daom.obs` (we use `daom_4.raw`) by adding the airmasses of the longest
   exposure as columns (in the same order as the photometric
   columns: `V, B, U, I`) All files are stored in the folder `3_DAOM`.
   The `match.py` script is unable to produce a correct match. There's
   something probably wrong with the linear equations solution.
7. Finally, the magnitudes are transformed into the standard system using
   the coefficients obtained in 1. (stored in `fit_coeffs.dat`) with the
   `final_phot.py` script. I also used the `invertfit` task, and the results
   are stored in the `4_INVERTFIT` folder.

